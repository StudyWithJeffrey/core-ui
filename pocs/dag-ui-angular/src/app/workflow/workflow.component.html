<div class="page mb-0">
  <div class="page-header">
    <div class="page-links">
      <a *ngIf="this.workflowTemplate" [routerLink]="['/', this.namespace, 'workflow-templates', this.workflowTemplate.uid]" class="op-back-link">
        <i class="fas fa-chevron-left"></i>
        <span>Back to workflow details</span>
      </a>
      </div>
      <div class="page-title">
      <div class="page-title-text">Workflow view</div>
    </div>
  </div>


  <div class="page-body">
    <div class="header-bar op-border border-primary bg-primary-dark mt-4 mb-4 font-size-regular font-black font-roboto d-flex align-items-center">
      <app-status *ngIf="workflow" class="font-roboto-bold font-weight-bold" [status]="workflow.getWorkflowStatus().phase"></app-status>
      <span *ngIf="workflow && workflow.getWorkflowStatus().phase === 'Succeeded'" class="ml-1"> in </span>
      <app-clock *ngIf="workflow"
                 class="ml-1"
                 [startedAt]="workflow.getWorkflowStatus().startedAt"
                 [finishedAt]="workflow.getWorkflowStatus().finishedAt">
      </app-clock>
    </div>

    <div id="info-box" class="op-info-box">
      <div class="header">
        <div *ngIf="workflow" class="title">{{workflow.name}}</div>
      </div>
      <div #pageContent>
        <app-dag
          class="mt-4 h-100"
          [style.height]="height"
          (nodeClicked)="handleNodeClicked($event)"
          [identifier]="dagIdentifier">
        </app-dag>
      </div>
    </div>
    <app-node-info
       class="ml-3 op-border scroll-overflow"
       [ngClass]="{ 'visible': showNodeInfo, 'hidden': !showNodeInfo }"
       [style.height]="nodeInfoHeight"
       [style.minHeight]="nodeInfoHeight"
       [workflow]="workflow"
       (closeClicked)="onNodeInfoClosed()">
    </app-node-info>
  </div>
</div>
